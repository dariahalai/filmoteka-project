function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var c={id:e,exports:{}};return n[e]=c,t.call(c.exports,c,c.exports),c.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=c),c.register("37v9V",(function(t,n){e(t.exports,"trailerButtonRef",(function(){return o})),e(t.exports,"handleBackButtonClick",(function(){return i})),e(t.exports,"handleTrailerButtonClick",(function(){return d}));var r=c("lU18B");const o=document.getElementById("trailer"),a=document.getElementById("trailer-error"),s=document.querySelector(".spinner");if(!o)return;const i=(e,t)=>{t.classList.remove("display-none"),a.innerHTML="",e&&e.remove()},d=()=>{s.classList.remove("is-hidden");const e=o.getAttribute("data-movie-id");(0,r.getMovieTrailer)(e).then((e=>{const t=e.results;if(!t.length)throw new Error("Trailer is not available");(e=>{const t=document.createElement("iframe");t.src=`https://www.youtube.com/embed/${e}`,t.frameBorder="0",t.allowFullscreen=!0;const n=document.querySelector(".film__info-wrapper");n.classList.add("display-none");const r=document.createElement("div");r.classList.add("iframe-container"),r.setHTML('<button class="back-button" id="back-to-modal">BACK</button>'),n.after(r);const c=document.getElementById("back-to-modal");c.addEventListener("click",(()=>{i(r,n),c.removeEventListener("click",i)})),r.appendChild(t)})(t[0].key)})).catch((e=>{a.innerText=e.message})).finally((()=>{s.classList.add("is-hidden")}))};o.addEventListener("click",d)})),c("2nhTy"),c("lU18B"),c("5bcvB");var o=c("b5rV1"),a=c("fQE3M"),s=c("37v9V"),i=c("9dykO");const d={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},l=new(0,a.default);function u(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,s.handleBackButtonClick)(e,t),l.close(),d.closeBtn.removeEventListener("click",u),s.trailerButtonRef.removeEventListener("click",s.handleTrailerButtonClick),window.removeEventListener("keydown",m)}function m(e){"Escape"===e.code&&(l.close(),d.closeBtn.removeEventListener("click",u),window.removeEventListener("keydown",m))}d.gallery.addEventListener("click",(function(e){if(e.preventDefault(),s.trailerButtonRef.addEventListener("click",s.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,o.load("film-current-page").find((e=>e.id===Number(n))));var n;l.modifyDataFilm(t),l.open(),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?d.btnWatched.classList.replace("watched_send","watched_remove"):d.btnWatched.classList.replace("watched_remove","watched_send")}catch(e){console.error("Get state error: ",e.message),d.btnWatched.classList.replace("watched_remove","watched_send")}}(t),d.btnWatched.classList.contains("watched_remove")&&(d.btnWatched.textContent="REMOVE FROM WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?d.btnQueue.classList.replace("queue_send","queue_remove"):d.btnQueue.classList.replace("queue_remove","queue_send")}catch(e){console.error("Get state error: ",e.message),d.btnQueue.classList.replace("queue_remove","queue_send")}})(t),d.btnQueue.classList.contains("queue_remove")&&(d.btnQueue.textContent="REMOVE FROM QUEUE");d.btnWatched.addEventListener("click",(function(){d.btnWatched.classList.contains("watched_send")?(d.btnWatched.textContent="REMOVE FROM WATCHED",d.btnWatched.classList.replace("watched_send","watched_remove"),(0,i.sendWatchedToStorage)(t)):d.btnWatched.classList.contains("watched_remove")&&(d.btnWatched.textContent="ADD TO WATCHED",d.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),r=n.findIndex((t=>t.id===e.id));n.splice(r,1),localStorage.setItem("WatchedMovies",JSON.stringify(n)),d.btnWatched.classList.replace("watched_remove","watched_send")}catch(e){console.error("Get state error: ",e.message)}}(t))})),d.btnQueue.addEventListener("click",(function(){d.btnQueue.classList.contains("queue_send")?(d.btnQueue.textContent="REMOVE FROM QUEUE",d.btnQueue.classList.replace("queue_send","queue_remove"),(0,i.sendQueueToStorage)(t)):d.btnQueue.classList.contains("queue_remove")&&(d.btnQueue.textContent="ADD TO QUEUE",d.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),r=n.findIndex((t=>t.id===e.id));n.splice(r,1),localStorage.setItem("QueueMovies",JSON.stringify(n)),d.btnQueue.classList.replace("queue_remove","queue_send")}catch(e){console.error("Get state error: ",e.message)}}(t))})),d.closeBtn.addEventListener("click",u),window.addEventListener("keydown",m)})),d.closeBtn.addEventListener("click",u),window.addEventListener("keydown",m),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&u()})),c("37v9V"),c("7bYU0"),c("jLhJV");
//# sourceMappingURL=index.3dbb19cd.js.map
