{"mappings":"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","sources":["src/js/film-search.js","src/js/spinner.js","src/js/pagination.js","src/js/popular.js","src/index.js","src/js/open-model.js"],"sourcesContent":["import spinnerToggle from './spinner';\n\nconst refs = {\n  form: document.querySelector('.header__form'),\n  input: document.querySelector('.header__input'),\n  formButton: document.querySelector('.btn'),\n  gallery: document.querySelector('.js-gallery'),\n  warning: document.querySelector('.header__warning'),\n  inputBtnClear: document.querySelector('.btn-cross'),\n};\n\nimport axios from 'axios';\nimport {\n  renderPagination,\n  IN_MAIN_POPULAR,\n  IN_MAIN_SEARCH,\n} from './pagination.js';\nimport { getPopulars, renderFilmCards, galleryRef } from './popular.js';\nimport { KEY } from './constants';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nexport class searchMovieApi {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async searchMovieFetch(page) {\n    const searchMovieParams = new URLSearchParams({\n      api_key: KEY,\n      language: 'en-US',\n      query: `${this.searchQuery}`,\n      page: page,\n      include_adult: false,\n    });\n\n    try {\n      const response = await axios.get(\n        `${BASE_URL}/search/movie?${searchMovieParams}`\n      );\n\n      if (response.status !== 200) {\n        throw new Error(response.status);\n      }\n\n      // return response.data.results;\n      return response.data;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n\nexport const movieApi = new searchMovieApi();\nif (!refs.inputBtnClear) {\n  return;\n}\nrefs.inputBtnClear.style.display = 'none';\nfunction clearSearch() {\n  refs.gallery.innerHTML = '';\n}\n// this function will be call if input or results is empty. No possibility to check at same time, becouse error occured when search string is empty!\nrefs.input.addEventListener('input', onInputClear);\nfunction onInputClear(evt) {\n  const inputValue = refs.input.value;\n\n  if (inputValue) {\n    refs.inputBtnClear.style.display = 'block';\n\n    refs.inputBtnClear.addEventListener('click', () => {\n      refs.inputBtnClear.style.display = 'none';\n      refs.input.value = '';\n      return;\n    });\n  }\n}\nfunction emptyQueryOrNoResults() {\n  refs.warning.insertAdjacentHTML(\n    'beforeend',\n    `<div class=\"header__warning-message\">Search result not successful. Enter the correct movie name.</div>`\n  );\n\n  setTimeout(() => {\n    refs.warning.innerHTML = '';\n  }, 4000);\n\n  galleryRef.innerHTML = '';\n\n  getPopulars(1).then(({ page, results, total_pages: pages }) => {\n    renderFilmCards(results);\n    renderPagination(page, pages, IN_MAIN_POPULAR);\n  });\n}\n\nrefs.form.addEventListener('submit', onSearchClick);\n\nfunction onSearchClick(evt) {\n  spinnerToggle();\n  evt.preventDefault();\n  movieApi.query = evt.currentTarget.elements.searchQuery.value\n    .trim()\n    .toLowerCase();\n  // If empty - show Popular\n  if (!movieApi.query) {\n    emptyQueryOrNoResults();\n    return;\n  }\n\n  movieApi.resetPage();\n\n  movieApi.searchMovieFetch(1).then(data => {\n    if (!data) return;\n    // Destructure Andrii\n    const { page, total_pages, results } = data;\n    // If no results - show Popular\n    if (!total_pages) {\n      spinnerToggle();\n      emptyQueryOrNoResults();\n      return;\n    }\n\n    clearSearch();\n\n    // renderFilmCards(data); Andrii\n    renderFilmCards(results);\n    // Add rendering of pagination\n    renderPagination(page, total_pages, IN_MAIN_SEARCH);\n    spinnerToggle();\n  });\n}\n","export default function spinnerToggle() { \n  document.querySelector('.spinner').classList.toggle(\"is-hidden\");\n}\n\n// потрібно викликати функцію spinnerToggle(), для цього у js файлі до якого функція викликається потрібно зробити імпорт:     import spinnerToggle from './spinner'(адреса може бути інша);\n// Функція просто забирає у спінера display:none, тому коли сторінка завантажиться потрібно знову викликати функцію.\n","import { renderFilmCards, getPopulars } from './popular.js';\nimport spinnerToggle from './spinner';\nimport { movieApi } from './film-search.js';\n\nspinnerToggle();\nwindow.addEventListener('load', spinnerToggle);\n\nconst pagMainRef = document.querySelector('.js-pagination');\n\nlet currentNow = 1;\nlet currentRef = pagMainRef;\nlet currentPage = 1;\n\nexport const IN_MAIN_POPULAR = 1;\nexport const IN_MAIN_SEARCH = 2;\nexport const IN_LIBRARY = 0;\n\nconst LEFT_ARROW = '&#8592;';\nconst RIGHT_ARROW = '&#8594;';\n\nexport function renderPagination(page, pages, now) {\n  let prevPage = page - 1;\n  let twoPrevPage = page - 2;\n  let nextPage = page + 1;\n  let twoNextPage = page + 2;\n  let markup = '';\n\n  currentRef = now ? pagMainRef : pagLibRef;\n  currentNow = now;\n\n  if (!page || page > pages) return;\n\n  if (page > 1)\n    markup += `<li class=\"js-pagination__arrow-left\">${LEFT_ARROW}</li>`;\n\n  if (page > 1)\n    markup += `<li class=\"js-pagination__button js-pagination__button-end\">1</li>`;\n\n  if (page > 4) markup += `<li class=\"js-pagination__points\">...</li>`;\n\n  if (page > 3)\n    markup += `<li class=\"js-pagination__button\">${twoPrevPage}</li>`;\n\n  if (page > 2) markup += `<li class=\"js-pagination__button\">${prevPage}</li>`;\n\n  markup += `<li class=\"js-pagination__button js-pagination__button-current\">${page}</li>`;\n\n  if (page + 1 < pages)\n    markup += `<li class=\"js-pagination__button\">${nextPage}</li>`;\n\n  if (page + 2 < pages)\n    markup += `<li class=\"js-pagination__button\">${twoNextPage}</li>`;\n\n  if (page + 4 < pages) markup += `<li class=\"js-pagination__points\">...</li>`;\n\n  if (page < pages)\n    markup += `<li class=\"js-pagination__button js-pagination__button-end\">${pages}</li>`;\n\n  if (page < pages)\n    markup += `<li class=\"js-pagination__arrow-right\">${RIGHT_ARROW}</li>`;\n\n  // pagLibRef\n  // Here need a ref of Library pagRef\n  currentRef.innerHTML = markup;\n}\n\ncurrentRef.addEventListener('click', ({ target }) => {\n  if (target.textContent === '...') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n\n\n  if (!currentNow) {\n    // console.log('Call function from Library');\n    // renderQueuedFilmCards(page);\n  } else {\n    if (currentNow === 1) {spinnerToggle();\n      getPopulars(currentPage).then(({ page, results, total_pages: pages }) => {\n        renderFilmCards(results);\n\n        renderPagination(page, pages, currentNow);\n        spinnerToggle();\n\n      });\n    } else {\n      movieApi\n        .searchMovieFetch(currentPage)\n        .then(({ page, results, total_pages: pages }) => {\n          renderFilmCards(results);\n          renderPagination(page, pages, currentNow);\n        });\n    }\n  }\n});\n","import axios from 'axios';\n\nimport { renderPagination, IN_MAIN_POPULAR } from './pagination.js';\nimport { KEY, MEDIA_TYPE, API } from './constants';\n\n// імпорт файлу сховища та запис в змінну ключа\nimport * as storageLocal from './local-storage.js';\nconst FILM_CURRENT_PAGE = 'film-current-page';\n//\nconst TIME_WINDOW = 'week';\nconst TRENDING = 'trending';\nconst GENRES = 'genre/movie/list';\nconst IMG_PATH = 'https://image.tmdb.org/t/p/';\nconst SMALL_SIZE = 'w500';\n\nexport const NO_IMAGE =\n  'https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg';\n\nexport let genresList;\n\ngetOriginGenres().then(response => {\n  genresList = Array.from(response.genres);\n});\n\nexport const galleryRef = document.querySelector('.js-gallery');\n\nconst warning = document.querySelector('.header__warning');\n\nwindow.addEventListener('load', () => {\n  galleryRef.innerHTML = '';\n\n  getPopulars(1)\n    .then(({ page, results, total_pages: pages }) => {\n      renderFilmCards(results);\n      renderPagination(page, pages, IN_MAIN_POPULAR);\n    })\n    .catch(() => {\n      warning.insertAdjacentHTML(\n        'beforeend',\n        `<div class=\"header__warning-message\">Service is temporarily unavailable.</div>`\n      );\n\n      setTimeout(() => {\n        warning.innerHTML = '';\n      }, 4000);\n    });\n});\n\nexport async function getPopulars(page) {\n  try {\n    const searchParams = new URLSearchParams({\n      api_key: KEY,\n      page: page,\n      include_adult: false,\n    });\n\n    const response = await axios.get(\n      `${API}${TRENDING}/${MEDIA_TYPE}/${TIME_WINDOW}?${searchParams}`\n    );\n\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n\n    // console.log('респонс Барчука', response.data);\n\n    return response.data;\n  } catch (error) {\n    // console.log('Підставити картинку, сервер терміново недоступний');\n  }\n}\n\nexport function renderFilmCards(data) {\n  let markup = '';\n  data.forEach(({ id, poster_path, genre_ids, title, release_date }) => {\n    let genresStr = getGenres(genre_ids);\n    let year = !release_date ? '' : release_date.substring(0, 4);\n    if (genresStr && year) genresStr += ' | ';\n    if (!title) title = 'no information';\n\n    let smallImg = !!poster_path\n      ? IMG_PATH + SMALL_SIZE + poster_path\n      : NO_IMAGE;\n\n    markup += `\n      <li class=\"film-card\">\n         \t<a href=\"#\" class=\"film-card__link\">\n            <img\n              class=\"film-card__film-img\"\n              src=\"${smallImg}\"\n              alt=\"${title}\"\n              id=\"${id}\"\n            />\n            <h3 class=\"film-card__film-name\">${title}</h3>\n            <p class=\"film-card__genre\">${genresStr}${year}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`;\n  });\n\n  galleryRef.innerHTML = markup;\n\n  // запис в локальне сховище\n  storageLocal.save(FILM_CURRENT_PAGE, [...data]);\n  //\n}\n\nasync function getOriginGenres() {\n  try {\n    const searchParams = new URLSearchParams({\n      api_key: KEY,\n    });\n\n    const response = await axios.get(`${API}${GENRES}?${searchParams}`);\n\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.log('Підставити картинку, сервер терміново недоступний');\n  }\n}\n\nexport function getGenres(genreSet) {\n  let genreStr = '';\n\n  if (!genreSet) return '';\n  genreSet.forEach(id => {\n    for (const genre of genresList) {\n      if (genre.id === id) genreStr += genre.name + ', ';\n    }\n  });\n\n  return !genreStr ? '' : genreStr.substring(0, genreStr.length - 2);\n}\n","import './js/pagination';\nimport './js/popular';\nimport './js/film-search';\nimport './js/open-model';\nimport './js/trailer';\nimport './js/modal-team';\nimport './js/btn-scroll';\n\n\n","import * as storageLocal from './local-storage.js';\nimport ModalFilm from './modal-film';\nimport { handleBackButtonClick, trailerButtonRef,  handleTrailerButtonClick} from './trailer';\n\nimport { sendWatchedToStorage, sendQueueToStorage} from \"./local-storage-set\";\n\nconst refs = {\n  gallery: document.querySelector('.js-gallery'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  btnWatched: document.querySelector(\".btn_watched\"),\n  btnQueue: document.querySelector(\".btn_queue\"),\n};\n\nconst modalFilm = new ModalFilm();\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);  \n\nfunction onOverlayClose(event) {\n  if (!event.target.closest(\".modal\") && event.target.closest('.backdrop')) {\n      onCloseModal();\n  }\n}\ndocument.addEventListener(\"click\", onOverlayClose)\n\nfunction onOpenModal(e) {\n  e.preventDefault();\n  trailerButtonRef.addEventListener('click', handleTrailerButtonClick);\n\n  if (e.target.nodeName !== 'IMG') return;\n\n  const dataCurentFilm = getFilmData(e.target.id);\n\n  modalFilm.modifyDataFilm(dataCurentFilm);\n  modalFilm.open();\n\n///// for local-storage and button /////////\n  refs.btnWatched.addEventListener(\"click\", onWatchedBtnClick)\n  refs.btnQueue.addEventListener(\"click\", onQueueBtnClick)\n\n  localStorage.setItem(\"CurrentFilm\", JSON.stringify(dataCurentFilm))\n  \n  checkWatchedStorage(dataCurentFilm)\n  if (refs.btnWatched.classList.contains(\"watched_remove\")) {\n    refs.btnWatched.textContent = 'REMOVE FROM WATCHED'} \n  else if(refs.btnWatched.classList.contains(\"watched_send\")){\n    refs.btnWatched.textContent = 'ADD TO WATCHED'\n  }\n\n  checkQueueStorage(dataCurentFilm)\n  if (refs.btnQueue.classList.contains(\"queue_remove\")) {\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE'}\n  else if (refs.btnWatched.classList.contains(\"queue_send\")){\n    refs.btnQueue.textContent = 'ADD TO QUEUE'\n  }\n    \n  function onWatchedBtnClick() {\n    if (refs.btnWatched.classList.contains(\"watched_send\")) {\n      refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n      refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n\n      sendWatchedToStorage()\n\n    } else if (refs.btnWatched.classList.contains(\"watched_remove\")) {\n      refs.btnWatched.textContent = 'ADD TO WATCHED'  \n      refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n\n      removeWatchedFilm(dataCurentFilm)\n    }\n      \n    refs.btnWatched.textContent = 'ADD TO WATCHED' \n    refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")  \n  }\n \n  function removeWatchedFilm(currentFilm) {\n      try {\n        const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n        const getWatchedArray = JSON.parse(getWatchedFromStorage)\n\n        const watchedFilmIndex = getWatchedArray.findIndex(value => value.id === currentFilm.id);\n        getWatchedArray.splice(watchedFilmIndex, 1)\n        localStorage.setItem(\"WatchedMovies\", JSON.stringify(getWatchedArray))\n      } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n}\n  \n  function onQueueBtnClick() {\n    if (refs.btnQueue.classList.contains(\"queue_send\")) {\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n      refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n\n      sendQueueToStorage()\n    } else if (refs.btnQueue.classList.contains(\"queue_remove\")) {\n      refs.btnQueue.textContent = 'ADD TO QUEUE'  \n      refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n\n      removeQueueFilm(dataCurentFilm)\n    }\n\n    refs.btnQueue.textContent = 'ADD TO QUEUE'  \n    refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n  }\n\n  function removeQueueFilm(currentFilm) {\n      try {\n        const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n        const getQueueArray = JSON.parse(getQueueFromStorage)\n\n        const queueFilmIndex = getQueueArray.findIndex(value => value.id === currentFilm.id);\n        getQueueArray.splice(queueFilmIndex, 1)\n        localStorage.setItem(\"QueueMovies\", JSON.stringify(getQueueArray))\n\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n  }\n///////////////////end of local-storage ///////////\n\n  refs.closeBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onCloseModalEsc);\n}\n\nfunction onCloseModal() {\n  const iframeContainer = document.querySelector('.iframe-container');\n  const trailerContainer = document.querySelector('.film__info-wrapper');\n  handleBackButtonClick(iframeContainer, trailerContainer);\n  modalFilm.close();\n  refs.closeBtn.removeEventListener('click', onCloseModal);\n  trailerButtonRef.removeEventListener('click', handleTrailerButtonClick);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n\n  //////////Примусове перезавантаження сторінки /////////////////////////////////\n  // window.location.reload()\n}\n\nfunction onCloseModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalFilm.close();\n\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction getFilmData(filmId) {\n  const filmList = storageLocal.load('film-current-page');\n  return filmList.find(film => film.id === Number(filmId));\n}\n\n////////////// checks for button /////////////////\n\nfunction checkWatchedStorage(currentFilm) {\n  try {\n    const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n    const getWatchedArray = JSON.parse(getWatchedFromStorage)\n    const checkWatchedStorage = getWatchedArray.find(option => option.id === currentFilm.id);\n        if (checkWatchedStorage) {\n          refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n          refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n        } else {\n          refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n          refs.btnWatched.textContent = 'ADD TO WATCHED'\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n    }\n}\n\nfunction checkQueueStorage(currentFilm) {\n  try {\n    const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n    const getQueueArray = JSON.parse(getQueueFromStorage)\n    const checkQueueStorage = getQueueArray.find(option => option.id === currentFilm.id);\n        if (checkQueueStorage) {\n          refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n          refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n        } else {\n          refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n          refs.btnQueue.textContent = 'ADD TO QUEUE'\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n    }\n}"],"names":["$bpxeT","parcelRequire","refs","form","document","querySelector","input","formButton","gallery","warning","inputBtnClear","movieApi","searchMovieApi1","this","searchQuery","page","key","$parcel$interopDefault","$2TvXO","mark","_callee","searchMovieParams","response","URLSearchParams","api_key","$4s6iC","KEY","language","query","concat","_this","include_adult","$dIxxU","default","get","_ctx","sent","status","Error","data","console","log","t0","message","newQuery","emptyQueryOrNoResults","insertAdjacentHTML","setTimeout","innerHTML","$cLaDu","galleryRef","getPopulars","then","param","results","pages","total_pages","renderFilmCards","$jcFG7","renderPagination","IN_MAIN_POPULAR","style","display","addEventListener","evt","value","$j1lrD","preventDefault","currentTarget","elements","trim","toLowerCase","resetPage","searchMovieFetch","IN_MAIN_SEARCH","$dd8ebecfaae47a78$export$2e2bcd8739ae039","classList","toggle","window","$dfaf77c789ce7a24$var$pagMainRef","$dfaf77c789ce7a24$var$currentNow","$dfaf77c789ce7a24$var$currentRef","$dfaf77c789ce7a24$var$currentPage","$dfaf77c789ce7a24$export$48363212074cf40d","$dfaf77c789ce7a24$export$f946d1a34dbd3bc6","$dfaf77c789ce7a24$export$825408fbca4f2040","now","prevPage","twoPrevPage","nextPage","twoNextPage","markup","pagLibRef","param1","target","textContent","contains","Number","$hV50k","$94a21fe277797eb7$export$65f5202b5c3d7552","$94a21fe277797eb7$var$TIME_WINDOW","$94a21fe277797eb7$var$TRENDING","$94a21fe277797eb7$var$GENRES","$94a21fe277797eb7$var$_getOriginGenres","apply","arguments","$94a21fe277797eb7$var$getOriginGenres","Array","from","genres","$94a21fe277797eb7$export$7ccb58989d57b8c2","$94a21fe277797eb7$var$warning","$94a21fe277797eb7$export$41925180ea5ac7b4","$94a21fe277797eb7$var$_getPopulars","searchParams","API","MEDIA_TYPE","$94a21fe277797eb7$export$e6243425577ce802","forEach","genreSet","genreStr","id","poster_path","genre_ids","title","release_date","genresStr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","genre","name","err","return","substring","length","year","$94a21fe277797eb7$var$IMG_PATH","$4LMMA","save","$8nrFW","catch","$fb09461e5f4fdf78$var$refs","closeBtn","btnWatched","btnQueue","$fb09461e5f4fdf78$var$modalFilm","$73ES2","$fb09461e5f4fdf78$var$onCloseModal","iframeContainer","trailerContainer","$cDXQO","handleBackButtonClick","close","removeEventListener","trailerButtonRef","handleTrailerButtonClick","$fb09461e5f4fdf78$var$onCloseModalEsc","e","code","nodeName","dataCurentFilm","filmId","load","find","film","modifyDataFilm","open","replace","$iDjs5","sendWatchedToStorage","currentFilm","getWatchedFromStorage","localStorage","getItem","getWatchedArray","JSON","parse","watchedFilmIndex","findIndex","splice","setItem","stringify","error","removeWatchedFilm","sendQueueToStorage","getQueueFromStorage","getQueueArray","queueFilmIndex","removeQueueFilm","option","$fb09461e5f4fdf78$var$checkWatchedStorage","$fb09461e5f4fdf78$var$checkQueueStorage","event","closest"],"version":3,"file":"index.961c694c.js.map"}