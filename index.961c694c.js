!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequired7c6=i),i.register("hV50k",(function(n,a){t(n.exports,"movieApi",(function(){return h}));var r=i("bpxeT"),c=i("8MBJY"),o=i("a2hTj"),s=i("2TvXO"),u=i("j1lrD"),l=i("dIxxU"),d=i("jcFG7"),f=i("cLaDu"),p=i("4s6iC"),g={form:document.querySelector(".header__form"),input:document.querySelector(".header__input"),formButton:document.querySelector(".btn"),gallery:document.querySelector(".js-gallery"),warning:document.querySelector(".header__warning"),inputBtnClear:document.querySelector(".btn-cross")},h=new(function(){"use strict";function t(){e(c)(this,t),this.searchQuery="",this.page=1}return e(o)(t,[{key:"searchMovieFetch",value:function(t){var n=this;return e(r)(e(s).mark((function a(){var r,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:p.KEY,language:"en-US",query:"".concat(n.searchQuery),page:t,include_adult:!1}),e.prev=1,e.next=4,l.default.get("".concat("https://api.themoviedb.org/3","/search/movie?").concat(r));case 4:if(200===(i=e.sent).status){e.next=7;break}throw new Error(i.status);case 7:return e.abrupt("return",i.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}}),a,null,[[1,10]])})))()}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"resetPage",value:function(){this.page=1}}]),t}());function _(){g.warning.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((function(){g.warning.innerHTML=""}),4e3),f.galleryRef.innerHTML="",(0,f.getPopulars)(1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;(0,f.renderFilmCards)(n),(0,d.renderPagination)(t,a,d.IN_MAIN_POPULAR)}))}g.inputBtnClear&&(g.inputBtnClear.style.display="none",g.input.addEventListener("input",(function(e){g.input.value&&(g.inputBtnClear.style.display="block",g.inputBtnClear.addEventListener("click",(function(){g.inputBtnClear.style.display="none",g.input.value=""})))})),g.form.addEventListener("submit",(function(e){if((0,u.default)(),e.preventDefault(),h.query=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!h.query)return void _();h.resetPage(),h.searchMovieFetch(1).then((function(e){if(e){var t=e.page,n=e.total_pages,a=e.results;if(!n)return(0,u.default)(),void _();g.gallery.innerHTML="",(0,f.renderFilmCards)(a),(0,d.renderPagination)(t,n,d.IN_MAIN_SEARCH),(0,u.default)()}}))})))})),i.register("j1lrD",(function(e,n){function a(){document.querySelector(".spinner").classList.toggle("is-hidden")}t(e.exports,"default",(function(){return a}))})),i.register("jcFG7",(function(e,n){t(e.exports,"IN_MAIN_POPULAR",(function(){return d})),t(e.exports,"IN_MAIN_SEARCH",(function(){return f})),t(e.exports,"renderPagination",(function(){return p}));var a=i("cLaDu"),r=i("j1lrD"),c=i("hV50k");(0,r.default)(),window.addEventListener("load",r.default);var o=document.querySelector(".js-pagination"),s=1,u=o,l=1,d=1,f=2;function p(e,t,n){var a=e-1,r=e-2,i=e+1,c=e+2,l="";u=n?o:pagLibRef,s=n,!e||e>t||(e>1&&(l+='<li class="js-pagination__arrow-left">'.concat("&#8592;","</li>")),e>1&&(l+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(l+='<li class="js-pagination__points">...</li>'),e>3&&(l+='<li class="js-pagination__button">'.concat(r,"</li>")),e>2&&(l+='<li class="js-pagination__button">'.concat(a,"</li>")),l+='<li class="js-pagination__button js-pagination__button-current">'.concat(e,"</li>"),e+1<t&&(l+='<li class="js-pagination__button">'.concat(i,"</li>")),e+2<t&&(l+='<li class="js-pagination__button">'.concat(c,"</li>")),e+4<t&&(l+='<li class="js-pagination__points">...</li>'),e<t&&(l+='<li class="js-pagination__button js-pagination__button-end">'.concat(t,"</li>")),e<t&&(l+='<li class="js-pagination__arrow-right">'.concat("&#8594;","</li>")),u.innerHTML=l)}u.addEventListener("click",(function(e){var t=e.target;"..."!==t.textContent&&(t.classList.contains("js-pagination__arrow-left")&&(l-=1),t.classList.contains("js-pagination__arrow-right")&&(l+=1),t.classList.contains("js-pagination__button")&&(l=Number(t.textContent)),s&&(1===s?((0,r.default)(),(0,a.getPopulars)(l).then((function(e){var t=e.page,n=e.results,i=e.total_pages;(0,a.renderFilmCards)(n),p(t,i,s),(0,r.default)()}))):c.movieApi.searchMovieFetch(l).then((function(e){var t=e.page,n=e.results,r=e.total_pages;(0,a.renderFilmCards)(n),p(t,r,s)}))))}))})),i.register("cLaDu",(function(n,a){t(n.exports,"galleryRef",(function(){return _})),t(n.exports,"getPopulars",(function(){return m})),t(n.exports,"renderFilmCards",(function(){return w}));var r,c=i("bpxeT"),o=i("8nrFW"),s=i("2TvXO"),u=i("dIxxU"),l=i("jcFG7"),d=i("4s6iC"),f=i("4LMMA"),p="week",g="trending",h="genre/movie/list";(function(){return y.apply(this,arguments)})().then((function(e){r=Array.from(e.genres)}));var _=document.querySelector(".js-gallery"),v=document.querySelector(".header__warning");function m(e){return b.apply(this,arguments)}function b(){return(b=e(c)(e(s).mark((function t(n){var a,r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new URLSearchParams({api_key:d.KEY,page:n,include_adult:!1}),e.next=4,u.default.get("".concat(d.API).concat(g,"/").concat(d.MEDIA_TYPE,"/").concat(p,"?").concat(a));case 4:if(200===(r=e.sent).status){e.next=7;break}throw new Error(r.status);case 7:return e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function w(t){var n="";t.forEach((function(e){var t,a,i=e.id,c=e.poster_path,o=e.genre_ids,s=e.title,u=e.release_date,l=(a="",(t=o)?(t.forEach((function(e){var t=!0,n=!1,i=void 0;try{for(var c,o=r[Symbol.iterator]();!(t=(c=o.next()).done);t=!0){var s=c.value;s.id===e&&(a+=s.name+", ")}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})),a?a.substring(0,a.length-2):""):""),d=u?u.substring(0,4):"";l&&d&&(l+=" | "),s||(s="no information"),n+='\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="'.concat(c?"https://image.tmdb.org/t/p/w500"+c:"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg",'"\n              alt="').concat(s,'"\n              id="').concat(i,'"\n            />\n            <h3 class="film-card__film-name">').concat(s,'</h3>\n            <p class="film-card__genre">').concat(l).concat(d,"</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t")})),_.innerHTML=n,f.save("film-current-page",e(o)(t))}function y(){return(y=e(c)(e(s).mark((function t(){var n,a;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams({api_key:d.KEY}),e.next=4,u.default.get("".concat(d.API).concat(h,"?").concat(n));case 4:if(200===(a=e.sent).status){e.next=7;break}throw new Error(a.status);case 7:return e.abrupt("return",a.data);case 10:e.prev=10,e.t0=e.catch(0),console.log("Підставити картинку, сервер терміново недоступний");case 13:case"end":return e.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}window.addEventListener("load",(function(){_.innerHTML="",m(1).then((function(e){var t=e.page,n=e.results,a=e.total_pages;w(n),(0,l.renderPagination)(t,a,l.IN_MAIN_POPULAR)})).catch((function(){v.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((function(){v.innerHTML=""}),4e3)}))}))})),i("jcFG7"),i("cLaDu"),i("hV50k");var c=i("4LMMA"),o=i("73ES2"),s=i("cDXQO"),u=i("iDjs5"),l={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},d=new(0,o.default);function f(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,s.handleBackButtonClick)(e,t),d.close(),l.closeBtn.removeEventListener("click",f),s.trailerButtonRef.removeEventListener("click",s.handleTrailerButtonClick),window.removeEventListener("keydown",p)}function p(e){"Escape"===e.code&&(d.close(),l.closeBtn.removeEventListener("click",f),window.removeEventListener("keydown",p))}l.gallery.addEventListener("click",(function(e){if(e.preventDefault(),s.trailerButtonRef.addEventListener("click",s.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,c.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;d.modifyDataFilm(t),d.open(),l.btnWatched.addEventListener("click",(function(){l.btnWatched.classList.contains("watched_send")?(l.btnWatched.textContent="REMOVE FROM WATCHED",l.btnWatched.classList.replace("watched_send","watched_remove"),(0,u.sendWatchedToStorage)()):l.btnWatched.classList.contains("watched_remove")&&(l.btnWatched.textContent="ADD TO WATCHED",l.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));l.btnWatched.textContent="ADD TO WATCHED",l.btnWatched.classList.replace("watched_remove","watched_send")})),l.btnQueue.addEventListener("click",(function(){l.btnQueue.classList.contains("queue_send")?(l.btnQueue.textContent="REMOVE FROM QUEUE",l.btnQueue.classList.replace("queue_send","queue_remove"),(0,u.sendQueueToStorage)()):l.btnQueue.classList.contains("queue_remove")&&(l.btnQueue.textContent="ADD TO QUEUE",l.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((function(t){return t.id===e.id}));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));l.btnQueue.textContent="ADD TO QUEUE",l.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(l.btnWatched.classList.replace("watched_send","watched_remove"),l.btnWatched.textContent="REMOVE FROM WATCHED"):(l.btnWatched.classList.replace("watched_remove","watched_send"),l.btnWatched.textContent="ADD TO WATCHED")}catch(e){l.btnWatched.classList.replace("watched_remove","watched_send")}}(t),l.btnWatched.classList.contains("watched_remove")?l.btnWatched.textContent="REMOVE FROM WATCHED":l.btnWatched.classList.contains("watched_send")&&(l.btnWatched.textContent="ADD TO WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?(l.btnQueue.classList.replace("queue_send","queue_remove"),l.btnQueue.textContent="REMOVE FROM QUEUE"):(l.btnQueue.classList.replace("queue_remove","queue_send"),l.btnQueue.textContent="ADD TO QUEUE")}catch(e){l.btnQueue.classList.replace("queue_remove","queue_send")}})(t),l.btnQueue.classList.contains("queue_remove")?l.btnQueue.textContent="REMOVE FROM QUEUE":l.btnWatched.classList.contains("queue_send")&&(l.btnQueue.textContent="ADD TO QUEUE");l.closeBtn.addEventListener("click",f),window.addEventListener("keydown",p)})),l.closeBtn.addEventListener("click",f),window.addEventListener("keydown",p),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&f()})),i("cDXQO"),i("aZhHc"),i("d7VxN")}();
//# sourceMappingURL=index.961c694c.js.map
