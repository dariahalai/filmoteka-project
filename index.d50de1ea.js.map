{"mappings":"gpBAAA,IAAAA,EAAAC,EAAA,S,oDAEA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,iBAC7BC,MAAOF,SAASC,cAAc,kBAC9BE,WAAYH,SAASC,cAAc,QACnCG,QAASJ,SAASC,cAAc,eAChCI,QAASL,SAASC,cAAc,oBAChCK,cAAeN,SAASC,cAAc,eAyDjC,MAAMM,EAAW,IA3CjB,MAMLC,uBAAuBC,GACrB,MAAMC,EAAoB,IAAIC,gBAAgB,CAC5CC,QAASC,EAAAC,IACTC,SAAU,QACVC,MAAO,GAAGC,KAAKC,cACfT,KAAMA,EACNU,eAAe,IAGjB,IACE,MAAMC,QAAiBC,EAAAC,QAAMC,IAC3B,6CAA4Bb,KAG9B,GAAwB,MAApBU,EAASI,OACX,MAAM,IAAIC,MAAML,EAASI,QAI3B,OAAOJ,EAASM,I,CAChB,MAAOC,GACPC,QAAQC,IAAIF,EAAMG,Q,EAGlBd,YACF,OAAOC,KAAKC,W,CAGVF,UAAMe,GACRd,KAAKC,YAAca,C,CAGrBC,YACEf,KAAKR,KAAO,C,CAtCdwB,cACEhB,KAAKC,YAAc,GACnBD,KAAKR,KAAO,C,GA+DhB,SAASyB,IACPpC,EAAKO,QAAQ8B,mBACX,YACA,0GAGFC,YAAW,KACTtC,EAAKO,QAAQgC,UAAY,EAAE,GAC1B,KAEHC,EAAAC,WAAWF,UAAY,IAEvB,EAAAC,EAAAE,aAAY,GAAGC,MAAK,EAAGhC,OAAMiC,UAASC,YAAaC,OACjD,EAAAN,EAAAO,iBAAgBH,IAChB,EAAAI,EAAAC,kBAAiBtC,EAAMmC,EAAOE,EAAAE,gBAAgB,G,CApC7ClD,EAAKQ,gBAGVR,EAAKQ,cAAc2C,MAAMC,QAAU,OAKnCpD,EAAKI,MAAMiD,iBAAiB,SAC5B,SAAsBC,GACDtD,EAAKI,MAAMmD,QAG5BvD,EAAKQ,cAAc2C,MAAMC,QAAU,QAEnCpD,EAAKQ,cAAc6C,iBAAiB,SAAS,KAC3CrD,EAAKQ,cAAc2C,MAAMC,QAAU,OACnCpD,EAAKI,MAAMmD,MAAQ,EACnB,I,IAsBNvD,EAAKC,KAAKoD,iBAAiB,UAE3B,SAAuBC,GAOrB,IANA,EAAAxD,EAAA0B,WACA8B,EAAIE,iBACJ/C,EAASS,MAAQoC,EAAIG,cAAcC,SAAStC,YAAYmC,MACrDI,OACAC,eAEEnD,EAASS,MAEZ,YADAkB,IAIF3B,EAASyB,YAETzB,EAASoD,iBAAiB,GAAGlB,MAAKf,IAChC,IAAKA,EAAM,OAEX,MAAMjB,KAAEA,EAAIkC,YAAEA,EAAWD,QAAEA,GAAYhB,EAEvC,IAAKiB,EAGH,OAFA,EAAA/C,EAAA0B,gBACAY,IA1DJpC,EAAKM,QAAQiC,UAAY,IAiEvB,EAAAC,EAAAO,iBAAgBH,IAEhB,EAAAI,EAAAC,kBAAiBtC,EAAMkC,EAAaG,EAAAc,iBACpC,EAAAhE,EAAA0B,UAAe,G,0CC3IJ,SAAAuC,IACb7D,SAASC,cAAc,YAAY6D,UAAUC,OAAO,Y,sPCDtD,IAAAzB,EAAAzC,EAAA,S,2BAIA,EAAAD,EAAA0B,WACA0C,OAAOb,iBAAiB,OAAQvD,EAAA0B,SAEhC,MAAM2C,EAAajE,SAASC,cAAc,kBAE1C,IAAIiE,EAAa,EACbC,EAAaF,EACbG,EAAc,EAEX,MAAMC,EAAkB,EAClBC,EAAiB,EAMvB,SAASC,EAAiB9D,EAAMmC,EAAO4B,GAC5C,IAIIC,EAAS,GAEbN,EAAaK,EAAMP,EAAaS,UAChCR,EAAaM,GAER/D,GAAQA,EAAOmC,IAEhBnC,EAAO,IACTgE,GAAU,sDAERhE,EAAO,IACTgE,GAAU,sEAERhE,EAAO,IAAGgE,GAAU,8CAEpBhE,EAAO,IACTgE,GAAU,qCAnBMhE,EAAO,UAqBrBA,EAAO,IAAGgE,GAAU,qCAtBThE,EAAO,UAwBtBgE,GAAU,mEAAmEhE,SAEzEA,EAAO,EAAImC,IACb6B,GAAU,qCAzBGhE,EAAO,UA2BlBA,EAAO,EAAImC,IACb6B,GAAU,qCA3BMhE,EAAO,UA6BrBA,EAAO,EAAImC,IAAO6B,GAAU,8CAE5BhE,EAAOmC,IACT6B,GAAU,+DAA+D7B,UAEvEnC,EAAOmC,IACT6B,GAAU,uDAIZN,EAAW9B,UAAYoC,E,CAGzBN,EAAWhB,iBAAiB,SAAS,EAACwB,OAAEA,MACX,QAAvBA,EAAOC,cAEPD,EAAOb,UAAUe,SAAS,+BAA8BT,GAAe,GAEvEO,EAAOb,UAAUe,SAAS,gCAA+BT,GAAe,GAExEO,EAAOb,UAAUe,SAAS,2BAC5BT,EAAcU,OAAOH,EAAOC,cAIzBV,IAIgB,IAAfA,IAAmB,EAAAtE,EAAA0B,YACrB,EAAAgB,EAAAE,aAAY4B,GAAa3B,MAAK,EAAChC,KAAEA,EAAIiC,QAAEA,EAASC,YAAaC,OAC3D,EAAAN,EAAAO,iBAAgBH,GAEhB6B,EAAiB9D,EAAMmC,EAAOsB,IAC9B,EAAAtE,EAAA0B,UAAe,KAIjByD,EAAAxE,SACGoD,iBAAiBS,GACjB3B,MAAK,EAAChC,KAAEA,EAAIiC,QAAEA,EAASC,YAAaC,OACnC,EAAAN,EAAAO,iBAAgBH,GAChB6B,EAAiB9D,EAAMmC,EAAOsB,EAAW,KACzC,G,+LChGV,IAAA7C,EAAAxB,EAAA,S,uCAkBO,IAAImF,GAyFXxE,iBACE,IACE,MAAMyE,EAAe,IAAItE,gBAAgB,CACvCC,QAASC,EAAAC,MAGLM,QAAiBC,EAAAC,QAAMC,IAAI,GAAGV,EAAAqE,uBAAgBD,KAEpD,GAAwB,MAApB7D,EAASI,OACX,MAAM,IAAIC,MAAML,EAASI,QAG3B,OAAOJ,EAASM,I,CAChB,MAAOC,GACPC,QAAQC,IAAI,oD,GArGhBsD,GAAkB1C,MAAKrB,IACrB4D,EAAaI,MAAMC,KAAKjE,EAASkE,OAAO,IAGnC,MAAMC,EAAavF,SAASC,cAAc,eAE3CuF,EAAUxF,SAASC,cAAc,oBAsBhCO,eAAeiF,EAAYhF,GAChC,IACE,MAAMwE,EAAe,IAAItE,gBAAgB,CACvCC,QAASC,EAAAC,IACTL,KAAMA,EACNU,eAAe,IAGXC,QAAiBC,EAAAC,QAAMC,IAC3B,GAAGV,EAAAqE,eAAkBrE,EAAA6E,mBAA6BT,KAGpD,GAAwB,MAApB7D,EAASI,OACX,MAAM,IAAIC,MAAML,EAASI,QAKb,OAAPJ,EAASM,I,CAChB,MAAOC,G,EAKJ,SAASgE,EAAgBjE,GAC9B,IAAI+C,EAAS,GACb/C,EAAKkE,SAAQ,EAACC,GAAEA,EAAEC,YAAEA,EAAWC,UAAEA,EAASC,MAAEA,EAAKC,aAAEA,MACjD,IAAIC,EAkDD,SAAmBC,GACxB,IAAIC,EAAW,GAEf,OAAKD,GACLA,EAASP,SAAQC,IACf,IAAK,MAAMQ,KAASrB,EACdqB,EAAMR,KAAOA,IAAIO,GAAYC,EAAMC,KAAO,KAAI,IAI9CF,EAAgBA,EAASG,UAAU,EAAGH,EAASI,OAAS,GAA7C,IAPG,E,CArDJC,CAAUV,GACtBW,EAAQT,EAAoBA,EAAaM,UAAU,EAAG,GAA/B,GACvBL,GAAaQ,IAAMR,GAAa,OAC/BF,IAAOA,EAAQ,kBAMpBvB,GAAU,oKAJOqB,EACba,kCAAwBb,EAjE9B,qGA0EmBE,yBACDH,oEAE2BG,mDACLE,IAAYQ,sDAG9C,IAGNnB,EAAWlD,UAAYoC,EAGFmC,EAAAC,KAhGG,oBAgGa,IAAInF,G,CA3E3CsC,OAAOb,iBAAiB,QAAQ,KAC9BoC,EAAWlD,UAAY,GAEvBoD,EAAY,GACThD,MAAK,EAAChC,KAAEA,EAAIiC,QAAEA,EAASC,YAAaC,MACnC+C,EAAgBjD,IAChB,EAAAI,EAAAC,kBAAiBtC,EAAMmC,EAAOE,EAAAE,gBAAgB,IAE/C8D,OAAM,KACLtB,EAAQrD,mBACN,YACA,kFAGFC,YAAW,KACToD,EAAQnD,UAAY,EAAE,GACrB,IAAK,GACR,G,IC7CNxC,EAAA,S,sBCAA,IAAA+G,EAAA/G,EAAA,S,uCAMA,MAAMkH,EAAO,CACX3G,QAASJ,SAASC,cAAc,eAChC+G,SAAUhH,SAASC,cAAc,sBACjCgH,WAAYjH,SAASC,cAAc,gBACnCiH,SAAUlH,SAASC,cAAc,eAG7BkH,EAAY,IAAI,EAAAC,EAAA9F,SA+GtB,SAAS+F,IACP,MAAMC,EAAkBtH,SAASC,cAAc,qBACzCsH,EAAmBvH,SAASC,cAAc,wBAChD,EAAAuH,EAAAC,uBAAsBH,EAAiBC,GACvCJ,EAAUO,QACVX,EAAKC,SAASW,oBAAoB,QAASN,GAC3CG,EAAAI,iBAAiBD,oBAAoB,QAASH,EAAAK,0BAC9C7D,OAAO2D,oBAAoB,UAAWG,E,CAOxC,SAASA,EAAgBC,GACR,WAAXA,EAAEC,OACJb,EAAUO,QAEVX,EAAKC,SAASW,oBAAoB,QAASN,GAC3CrD,OAAO2D,oBAAoB,UAAWG,G,CAhI1Cf,EAAK3G,QAAQ+C,iBAAiB,SAW9B,SAAqB4E,GAInB,GAHAA,EAAEzE,iBACFkE,EAAAI,iBAAiBzE,iBAAiB,QAASqE,EAAAK,0BAEjB,QAAtBE,EAAEpD,OAAOsD,SAAoB,OAEjC,MAAMC,GAmHaC,EAnHgBJ,EAAEpD,OAAOkB,GAoH3Be,EAAAwB,KAAkB,qBACnBC,MAAKC,GAAQA,EAAKzC,KAAOf,OAAOqD,MAFlD,IAAqBA,EAjHnBhB,EAAUoB,eAAeL,GACzBf,EAAUqB,OAGVzB,EAAKE,WAAW9D,iBAAiB,SAmBjC,WACM4D,EAAKE,WAAWnD,UAAUe,SAAS,iBACrCkC,EAAKE,WAAWrC,YAAc,sBAC9BmC,EAAKE,WAAWnD,UAAU2E,QAAQ,eAAgB,mBAElD,EAAAC,EAAAC,yBAES5B,EAAKE,WAAWnD,UAAUe,SAAS,oBAC5CkC,EAAKE,WAAWrC,YAAc,iBAC9BmC,EAAKE,WAAWnD,UAAU2E,QAAQ,iBAAkB,gBASxD,SAA2BG,GACvB,IACE,MAAMC,EAAwBC,aAAaC,QAAQ,iBAC7CC,EAAkBC,KAAKC,MAAML,GAE7BM,EAAmBH,EAAgBI,WAAU/F,GAASA,EAAMwC,KAAO+C,EAAY/C,KACrFmD,EAAgBK,OAAOF,EAAkB,GACzCL,aAAaQ,QAAQ,gBAAiBL,KAAKM,UAAUP,G,CACrD,MAAOrH,G,EAfT6H,CAAkBtB,IAGpBnB,EAAKE,WAAWrC,YAAc,iBAC9BmC,EAAKE,WAAWnD,UAAU2E,QAAQ,iBAAkB,e,IAjCtD1B,EAAKG,SAAS/D,iBAAiB,SAiD/B,WACM4D,EAAKG,SAASpD,UAAUe,SAAS,eACnCkC,EAAKG,SAAStC,YAAc,oBAC5BmC,EAAKG,SAASpD,UAAU2E,QAAQ,aAAc,iBAE9C,EAAAC,EAAAe,uBACS1C,EAAKG,SAASpD,UAAUe,SAAS,kBAC1CkC,EAAKG,SAAStC,YAAc,eAC5BmC,EAAKG,SAASpD,UAAU2E,QAAQ,eAAgB,cASpD,SAAyBG,GACrB,IACE,MAAMc,EAAsBZ,aAAaC,QAAQ,eAC3CY,EAAgBV,KAAKC,MAAMQ,GAE3BE,EAAiBD,EAAcP,WAAU/F,GAASA,EAAMwC,KAAO+C,EAAY/C,KACjF8D,EAAcN,OAAOO,EAAgB,GACrCd,aAAaQ,QAAQ,cAAeL,KAAKM,UAAUI,G,CAErD,MAAOhI,G,EAhBPkI,CAAgB3B,IAGlBnB,EAAKG,SAAStC,YAAc,eAC5BmC,EAAKG,SAASpD,UAAU2E,QAAQ,eAAgB,a,IA7DlDK,aAAaQ,QAAQ,cAAeL,KAAKM,UAAUrB,IAiHrD,SAA6BU,GAC3B,IACE,MAAMC,EAAwBC,aAAaC,QAAQ,iBAC7CC,EAAkBC,KAAKC,MAAML,GACPG,EAAgBX,MAAKyB,GAAUA,EAAOjE,KAAO+C,EAAY/C,MAE/EkB,EAAKE,WAAWnD,UAAU2E,QAAQ,eAAgB,kBAClD1B,EAAKE,WAAWrC,YAAc,wBAE9BmC,EAAKE,WAAWnD,UAAU2E,QAAQ,iBAAkB,gBACpD1B,EAAKE,WAAWrC,YAAc,iB,CAElC,MAAOjD,GAEPoF,EAAKE,WAAWnD,UAAU2E,QAAQ,iBAAkB,e,EA7HxDsB,CAAoB7B,GAChBnB,EAAKE,WAAWnD,UAAUe,SAAS,kBACrCkC,EAAKE,WAAWrC,YAAc,sBACxBmC,EAAKE,WAAWnD,UAAUe,SAAS,kBACzCkC,EAAKE,WAAWrC,YAAc,mBA6HlC,SAA2BgE,GACzB,IACE,MAAMc,EAAsBZ,aAAaC,QAAQ,eAC3CY,EAAgBV,KAAKC,MAAMQ,GACPC,EAActB,MAAKyB,GAAUA,EAAOjE,KAAO+C,EAAY/C,MAE3EkB,EAAKG,SAASpD,UAAU2E,QAAQ,aAAc,gBAC9C1B,EAAKG,SAAStC,YAAc,sBAE5BmC,EAAKG,SAASpD,UAAU2E,QAAQ,eAAgB,cAChD1B,EAAKG,SAAStC,YAAc,e,CAEhC,MAAOjD,GAEPoF,EAAKG,SAASpD,UAAU2E,QAAQ,eAAgB,a,GAxIpDuB,CAAkB9B,GACdnB,EAAKG,SAASpD,UAAUe,SAAS,gBACjCkC,EAAKG,SAAStC,YAAc,oBACvBmC,EAAKE,WAAWnD,UAAUe,SAAS,gBAC1CkC,EAAKG,SAAStC,YAAc,gBAkE9BmC,EAAKC,SAAS7D,iBAAiB,QAASkE,GACxCrD,OAAOb,iBAAiB,UAAW2E,E,IAzGrCf,EAAKC,SAAS7D,iBAAiB,QAASkE,GACxCrD,OAAOb,iBAAiB,UAAW2E,GAOnC9H,SAASmD,iBAAiB,SAL1B,SAAwB8G,IACjBA,EAAMtF,OAAOuF,QAAQ,WAAaD,EAAMtF,OAAOuF,QAAQ,cACxD7C,G","sources":["src/js/film-search.js","src/js/spinner.js","src/js/pagination.js","src/js/popular.js","src/index.js","src/js/open-model.js"],"sourcesContent":["import spinnerToggle from './spinner';\n\nconst refs = {\n  form: document.querySelector('.header__form'),\n  input: document.querySelector('.header__input'),\n  formButton: document.querySelector('.btn'),\n  gallery: document.querySelector('.js-gallery'),\n  warning: document.querySelector('.header__warning'),\n  inputBtnClear: document.querySelector('.btn-cross'),\n};\n\nimport axios from 'axios';\nimport {\n  renderPagination,\n  IN_MAIN_POPULAR,\n  IN_MAIN_SEARCH,\n} from './pagination.js';\nimport { getPopulars, renderFilmCards, galleryRef } from './popular.js';\nimport { KEY } from './constants';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nexport class searchMovieApi {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async searchMovieFetch(page) {\n    const searchMovieParams = new URLSearchParams({\n      api_key: KEY,\n      language: 'en-US',\n      query: `${this.searchQuery}`,\n      page: page,\n      include_adult: false,\n    });\n\n    try {\n      const response = await axios.get(\n        `${BASE_URL}/search/movie?${searchMovieParams}`\n      );\n\n      if (response.status !== 200) {\n        throw new Error(response.status);\n      }\n\n      // return response.data.results;\n      return response.data;\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n\nexport const movieApi = new searchMovieApi();\nif (!refs.inputBtnClear) {\n  return;\n}\nrefs.inputBtnClear.style.display = 'none';\nfunction clearSearch() {\n  refs.gallery.innerHTML = '';\n}\n// this function will be call if input or results is empty. No possibility to check at same time, becouse error occured when search string is empty!\nrefs.input.addEventListener('input', onInputClear);\nfunction onInputClear(evt) {\n  const inputValue = refs.input.value;\n\n  if (inputValue) {\n    refs.inputBtnClear.style.display = 'block';\n\n    refs.inputBtnClear.addEventListener('click', () => {\n      refs.inputBtnClear.style.display = 'none';\n      refs.input.value = '';\n      return;\n    });\n  }\n}\nfunction emptyQueryOrNoResults() {\n  refs.warning.insertAdjacentHTML(\n    'beforeend',\n    `<div class=\"header__warning-message\">Search result not successful. Enter the correct movie name.</div>`\n  );\n\n  setTimeout(() => {\n    refs.warning.innerHTML = '';\n  }, 4000);\n\n  galleryRef.innerHTML = '';\n\n  getPopulars(1).then(({ page, results, total_pages: pages }) => {\n    renderFilmCards(results);\n    renderPagination(page, pages, IN_MAIN_POPULAR);\n  });\n}\n\nrefs.form.addEventListener('submit', onSearchClick);\n\nfunction onSearchClick(evt) {\n  spinnerToggle();\n  evt.preventDefault();\n  movieApi.query = evt.currentTarget.elements.searchQuery.value\n    .trim()\n    .toLowerCase();\n  // If empty - show Popular\n  if (!movieApi.query) {\n    emptyQueryOrNoResults();\n    return;\n  }\n\n  movieApi.resetPage();\n\n  movieApi.searchMovieFetch(1).then(data => {\n    if (!data) return;\n    // Destructure Andrii\n    const { page, total_pages, results } = data;\n    // If no results - show Popular\n    if (!total_pages) {\n      spinnerToggle();\n      emptyQueryOrNoResults();\n      return;\n    }\n\n    clearSearch();\n\n    // renderFilmCards(data); Andrii\n    renderFilmCards(results);\n    // Add rendering of pagination\n    renderPagination(page, total_pages, IN_MAIN_SEARCH);\n    spinnerToggle();\n  });\n}\n","export default function spinnerToggle() { \n  document.querySelector('.spinner').classList.toggle(\"is-hidden\");\n}\n\n// потрібно викликати функцію spinnerToggle(), для цього у js файлі до якого функція викликається потрібно зробити імпорт:     import spinnerToggle from './spinner'(адреса може бути інша);\n// Функція просто забирає у спінера display:none, тому коли сторінка завантажиться потрібно знову викликати функцію.\n","import { renderFilmCards, getPopulars } from './popular.js';\nimport spinnerToggle from './spinner';\nimport { movieApi } from './film-search.js';\n\nspinnerToggle();\nwindow.addEventListener('load', spinnerToggle);\n\nconst pagMainRef = document.querySelector('.js-pagination');\n\nlet currentNow = 1;\nlet currentRef = pagMainRef;\nlet currentPage = 1;\n\nexport const IN_MAIN_POPULAR = 1;\nexport const IN_MAIN_SEARCH = 2;\nexport const IN_LIBRARY = 0;\n\nconst LEFT_ARROW = '&#8592;';\nconst RIGHT_ARROW = '&#8594;';\n\nexport function renderPagination(page, pages, now) {\n  let prevPage = page - 1;\n  let twoPrevPage = page - 2;\n  let nextPage = page + 1;\n  let twoNextPage = page + 2;\n  let markup = '';\n\n  currentRef = now ? pagMainRef : pagLibRef;\n  currentNow = now;\n\n  if (!page || page > pages) return;\n\n  if (page > 1)\n    markup += `<li class=\"js-pagination__arrow-left\">${LEFT_ARROW}</li>`;\n\n  if (page > 1)\n    markup += `<li class=\"js-pagination__button js-pagination__button-end\">1</li>`;\n\n  if (page > 4) markup += `<li class=\"js-pagination__points\">...</li>`;\n\n  if (page > 3)\n    markup += `<li class=\"js-pagination__button\">${twoPrevPage}</li>`;\n\n  if (page > 2) markup += `<li class=\"js-pagination__button\">${prevPage}</li>`;\n\n  markup += `<li class=\"js-pagination__button js-pagination__button-current\">${page}</li>`;\n\n  if (page + 1 < pages)\n    markup += `<li class=\"js-pagination__button\">${nextPage}</li>`;\n\n  if (page + 2 < pages)\n    markup += `<li class=\"js-pagination__button\">${twoNextPage}</li>`;\n\n  if (page + 4 < pages) markup += `<li class=\"js-pagination__points\">...</li>`;\n\n  if (page < pages)\n    markup += `<li class=\"js-pagination__button js-pagination__button-end\">${pages}</li>`;\n\n  if (page < pages)\n    markup += `<li class=\"js-pagination__arrow-right\">${RIGHT_ARROW}</li>`;\n\n  // pagLibRef\n  // Here need a ref of Library pagRef\n  currentRef.innerHTML = markup;\n}\n\ncurrentRef.addEventListener('click', ({ target }) => {\n  if (target.textContent === '...') return;\n\n  if (target.classList.contains('js-pagination__arrow-left')) currentPage -= 1;\n\n  if (target.classList.contains('js-pagination__arrow-right')) currentPage += 1;\n\n  if (target.classList.contains('js-pagination__button'))\n    currentPage = Number(target.textContent);\n\n\n\n  if (!currentNow) {\n    // console.log('Call function from Library');\n    // renderQueuedFilmCards(page);\n  } else {\n    if (currentNow === 1) {spinnerToggle();\n      getPopulars(currentPage).then(({ page, results, total_pages: pages }) => {\n        renderFilmCards(results);\n\n        renderPagination(page, pages, currentNow);\n        spinnerToggle();\n\n      });\n    } else {\n      movieApi\n        .searchMovieFetch(currentPage)\n        .then(({ page, results, total_pages: pages }) => {\n          renderFilmCards(results);\n          renderPagination(page, pages, currentNow);\n        });\n    }\n  }\n});\n","import axios from 'axios';\n\nimport { renderPagination, IN_MAIN_POPULAR } from './pagination.js';\nimport { KEY, MEDIA_TYPE, API } from './constants';\n\n// імпорт файлу сховища та запис в змінну ключа\nimport * as storageLocal from './local-storage.js';\nconst FILM_CURRENT_PAGE = 'film-current-page';\n//\nconst TIME_WINDOW = 'week';\nconst TRENDING = 'trending';\nconst GENRES = 'genre/movie/list';\nconst IMG_PATH = 'https://image.tmdb.org/t/p/';\nconst SMALL_SIZE = 'w500';\n\nexport const NO_IMAGE =\n  'https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg';\n\nexport let genresList;\n\ngetOriginGenres().then(response => {\n  genresList = Array.from(response.genres);\n});\n\nexport const galleryRef = document.querySelector('.js-gallery');\n\nconst warning = document.querySelector('.header__warning');\n\nwindow.addEventListener('load', () => {\n  galleryRef.innerHTML = '';\n\n  getPopulars(1)\n    .then(({ page, results, total_pages: pages }) => {\n      renderFilmCards(results);\n      renderPagination(page, pages, IN_MAIN_POPULAR);\n    })\n    .catch(() => {\n      warning.insertAdjacentHTML(\n        'beforeend',\n        `<div class=\"header__warning-message\">Service is temporarily unavailable.</div>`\n      );\n\n      setTimeout(() => {\n        warning.innerHTML = '';\n      }, 4000);\n    });\n});\n\nexport async function getPopulars(page) {\n  try {\n    const searchParams = new URLSearchParams({\n      api_key: KEY,\n      page: page,\n      include_adult: false,\n    });\n\n    const response = await axios.get(\n      `${API}${TRENDING}/${MEDIA_TYPE}/${TIME_WINDOW}?${searchParams}`\n    );\n\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n\n    // console.log('респонс Барчука', response.data);\n\n    return response.data;\n  } catch (error) {\n    // console.log('Підставити картинку, сервер терміново недоступний');\n  }\n}\n\nexport function renderFilmCards(data) {\n  let markup = '';\n  data.forEach(({ id, poster_path, genre_ids, title, release_date }) => {\n    let genresStr = getGenres(genre_ids);\n    let year = !release_date ? '' : release_date.substring(0, 4);\n    if (genresStr && year) genresStr += ' | ';\n    if (!title) title = 'no information';\n\n    let smallImg = !!poster_path\n      ? IMG_PATH + SMALL_SIZE + poster_path\n      : NO_IMAGE;\n\n    markup += `\n      <li class=\"film-card\">\n         \t<a href=\"#\" class=\"film-card__link\">\n            <img\n              class=\"film-card__film-img\"\n              src=\"${smallImg}\"\n              alt=\"${title}\"\n              id=\"${id}\"\n            />\n            <h3 class=\"film-card__film-name\">${title}</h3>\n            <p class=\"film-card__genre\">${genresStr}${year}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`;\n  });\n\n  galleryRef.innerHTML = markup;\n\n  // запис в локальне сховище\n  storageLocal.save(FILM_CURRENT_PAGE, [...data]);\n  //\n}\n\nasync function getOriginGenres() {\n  try {\n    const searchParams = new URLSearchParams({\n      api_key: KEY,\n    });\n\n    const response = await axios.get(`${API}${GENRES}?${searchParams}`);\n\n    if (response.status !== 200) {\n      throw new Error(response.status);\n    }\n\n    return response.data;\n  } catch (error) {\n    console.log('Підставити картинку, сервер терміново недоступний');\n  }\n}\n\nexport function getGenres(genreSet) {\n  let genreStr = '';\n\n  if (!genreSet) return '';\n  genreSet.forEach(id => {\n    for (const genre of genresList) {\n      if (genre.id === id) genreStr += genre.name + ', ';\n    }\n  });\n\n  return !genreStr ? '' : genreStr.substring(0, genreStr.length - 2);\n}\n","import './js/pagination';\nimport './js/popular';\nimport './js/film-search';\nimport './js/open-model';\nimport './js/trailer';\nimport './js/modal-team';\nimport './js/btn-scroll';\n\n\n","import * as storageLocal from './local-storage.js';\nimport ModalFilm from './modal-film';\nimport { handleBackButtonClick, trailerButtonRef,  handleTrailerButtonClick} from './trailer';\n\nimport { sendWatchedToStorage, sendQueueToStorage} from \"./local-storage-set\";\n\nconst refs = {\n  gallery: document.querySelector('.js-gallery'),\n  closeBtn: document.querySelector('[data-modal-close]'),\n  btnWatched: document.querySelector(\".btn_watched\"),\n  btnQueue: document.querySelector(\".btn_queue\"),\n};\n\nconst modalFilm = new ModalFilm();\n\nrefs.gallery.addEventListener('click', onOpenModal);\nrefs.closeBtn.addEventListener('click', onCloseModal);\nwindow.addEventListener('keydown', onCloseModalEsc);  \n\nfunction onOverlayClose(event) {\n  if (!event.target.closest(\".modal\") && event.target.closest('.backdrop')) {\n      onCloseModal();\n  }\n}\ndocument.addEventListener(\"click\", onOverlayClose)\n\nfunction onOpenModal(e) {\n  e.preventDefault();\n  trailerButtonRef.addEventListener('click', handleTrailerButtonClick);\n\n  if (e.target.nodeName !== 'IMG') return;\n\n  const dataCurentFilm = getFilmData(e.target.id);\n\n  modalFilm.modifyDataFilm(dataCurentFilm);\n  modalFilm.open();\n\n///// for local-storage and button /////////\n  refs.btnWatched.addEventListener(\"click\", onWatchedBtnClick)\n  refs.btnQueue.addEventListener(\"click\", onQueueBtnClick)\n\n  localStorage.setItem(\"CurrentFilm\", JSON.stringify(dataCurentFilm))\n  \n  checkWatchedStorage(dataCurentFilm)\n  if (refs.btnWatched.classList.contains(\"watched_remove\")) {\n    refs.btnWatched.textContent = 'REMOVE FROM WATCHED'} \n  else if(refs.btnWatched.classList.contains(\"watched_send\")){\n    refs.btnWatched.textContent = 'ADD TO WATCHED'\n  }\n\n  checkQueueStorage(dataCurentFilm)\n  if (refs.btnQueue.classList.contains(\"queue_remove\")) {\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE'}\n  else if (refs.btnWatched.classList.contains(\"queue_send\")){\n    refs.btnQueue.textContent = 'ADD TO QUEUE'\n  }\n    \n  function onWatchedBtnClick() {\n    if (refs.btnWatched.classList.contains(\"watched_send\")) {\n      refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n      refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n\n      sendWatchedToStorage()\n\n    } else if (refs.btnWatched.classList.contains(\"watched_remove\")) {\n      refs.btnWatched.textContent = 'ADD TO WATCHED'  \n      refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n\n      removeWatchedFilm(dataCurentFilm)\n    }\n      \n    refs.btnWatched.textContent = 'ADD TO WATCHED' \n    refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")  \n  }\n \n  function removeWatchedFilm(currentFilm) {\n      try {\n        const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n        const getWatchedArray = JSON.parse(getWatchedFromStorage)\n\n        const watchedFilmIndex = getWatchedArray.findIndex(value => value.id === currentFilm.id);\n        getWatchedArray.splice(watchedFilmIndex, 1)\n        localStorage.setItem(\"WatchedMovies\", JSON.stringify(getWatchedArray))\n      } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n}\n  \n  function onQueueBtnClick() {\n    if (refs.btnQueue.classList.contains(\"queue_send\")) {\n      refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n      refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n\n      sendQueueToStorage()\n    } else if (refs.btnQueue.classList.contains(\"queue_remove\")) {\n      refs.btnQueue.textContent = 'ADD TO QUEUE'  \n      refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n\n      removeQueueFilm(dataCurentFilm)\n    }\n\n    refs.btnQueue.textContent = 'ADD TO QUEUE'  \n    refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n  }\n\n  function removeQueueFilm(currentFilm) {\n      try {\n        const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n        const getQueueArray = JSON.parse(getQueueFromStorage)\n\n        const queueFilmIndex = getQueueArray.findIndex(value => value.id === currentFilm.id);\n        getQueueArray.splice(queueFilmIndex, 1)\n        localStorage.setItem(\"QueueMovies\", JSON.stringify(getQueueArray))\n\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n    }\n  }\n///////////////////end of local-storage ///////////\n\n  refs.closeBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onCloseModalEsc);\n}\n\nfunction onCloseModal() {\n  const iframeContainer = document.querySelector('.iframe-container');\n  const trailerContainer = document.querySelector('.film__info-wrapper');\n  handleBackButtonClick(iframeContainer, trailerContainer);\n  modalFilm.close();\n  refs.closeBtn.removeEventListener('click', onCloseModal);\n  trailerButtonRef.removeEventListener('click', handleTrailerButtonClick);\n  window.removeEventListener('keydown', onCloseModalEsc);\n\n\n  //////////Примусове перезавантаження сторінки /////////////////////////////////\n  // window.location.reload()\n}\n\nfunction onCloseModalEsc(e) {\n  if (e.code === 'Escape') {\n    modalFilm.close();\n\n    refs.closeBtn.removeEventListener('click', onCloseModal);\n    window.removeEventListener('keydown', onCloseModalEsc);\n  }\n}\n\nfunction getFilmData(filmId) {\n  const filmList = storageLocal.load('film-current-page');\n  return filmList.find(film => film.id === Number(filmId));\n}\n\n////////////// checks for button /////////////////\n\nfunction checkWatchedStorage(currentFilm) {\n  try {\n    const getWatchedFromStorage = localStorage.getItem(\"WatchedMovies\")\n    const getWatchedArray = JSON.parse(getWatchedFromStorage)\n    const checkWatchedStorage = getWatchedArray.find(option => option.id === currentFilm.id);\n        if (checkWatchedStorage) {\n          refs.btnWatched.classList.replace(\"watched_send\", \"watched_remove\")\n          refs.btnWatched.textContent = 'REMOVE FROM WATCHED'\n        } else {\n          refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n          refs.btnWatched.textContent = 'ADD TO WATCHED'\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnWatched.classList.replace(\"watched_remove\", \"watched_send\")\n    }\n}\n\nfunction checkQueueStorage(currentFilm) {\n  try {\n    const getQueueFromStorage = localStorage.getItem(\"QueueMovies\")\n    const getQueueArray = JSON.parse(getQueueFromStorage)\n    const checkQueueStorage = getQueueArray.find(option => option.id === currentFilm.id);\n        if (checkQueueStorage) {\n          refs.btnQueue.classList.replace(\"queue_send\", \"queue_remove\")\n          refs.btnQueue.textContent = 'REMOVE FROM QUEUE'\n        } else {\n          refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n          refs.btnQueue.textContent = 'ADD TO QUEUE'\n        }\n    } catch (error) {\n      // console.error('Get state error: ', error.message);\n      refs.btnQueue.classList.replace(\"queue_remove\", \"queue_send\")\n    }\n}"],"names":["$04jNI","parcelRequire","refs","form","document","querySelector","input","formButton","gallery","warning","inputBtnClear","movieApi","async","page","searchMovieParams","URLSearchParams","api_key","$8G1wF","KEY","language","query","this","searchQuery","include_adult","response","$2shzp","default","get","status","Error","data","error","console","log","message","newQuery","resetPage","constructor","emptyQueryOrNoResults","insertAdjacentHTML","setTimeout","innerHTML","$lU18B","galleryRef","getPopulars","then","results","total_pages","pages","renderFilmCards","$2nhTy","renderPagination","IN_MAIN_POPULAR","style","display","addEventListener","evt","value","preventDefault","currentTarget","elements","trim","toLowerCase","searchMovieFetch","IN_MAIN_SEARCH","$00cfbbdd8a53f936$export$2e2bcd8739ae039","classList","toggle","window","$1bab9c519cfa82bc$var$pagMainRef","$1bab9c519cfa82bc$var$currentNow","$1bab9c519cfa82bc$var$currentRef","$1bab9c519cfa82bc$var$currentPage","$1bab9c519cfa82bc$export$48363212074cf40d","$1bab9c519cfa82bc$export$f946d1a34dbd3bc6","$1bab9c519cfa82bc$export$825408fbca4f2040","now","markup","pagLibRef","target","textContent","contains","Number","$5bcvB","$ff1fb5e2e4d3490a$export$65f5202b5c3d7552","searchParams","API","$ff1fb5e2e4d3490a$var$getOriginGenres","Array","from","genres","$ff1fb5e2e4d3490a$export$7ccb58989d57b8c2","$ff1fb5e2e4d3490a$var$warning","$ff1fb5e2e4d3490a$export$41925180ea5ac7b4","MEDIA_TYPE","$ff1fb5e2e4d3490a$export$e6243425577ce802","forEach","id","poster_path","genre_ids","title","release_date","genresStr","genreSet","genreStr","genre","name","substring","length","$ff1fb5e2e4d3490a$export$c5604fa8028da00","year","$ff1fb5e2e4d3490a$var$IMG_PATH","$b5rV1","save","catch","$95c314e50c7458b5$var$refs","closeBtn","btnWatched","btnQueue","$95c314e50c7458b5$var$modalFilm","$fQE3M","$95c314e50c7458b5$var$onCloseModal","iframeContainer","trailerContainer","$37v9V","handleBackButtonClick","close","removeEventListener","trailerButtonRef","handleTrailerButtonClick","$95c314e50c7458b5$var$onCloseModalEsc","e","code","nodeName","dataCurentFilm","filmId","load","find","film","modifyDataFilm","open","replace","$9dykO","sendWatchedToStorage","currentFilm","getWatchedFromStorage","localStorage","getItem","getWatchedArray","JSON","parse","watchedFilmIndex","findIndex","splice","setItem","stringify","removeWatchedFilm","sendQueueToStorage","getQueueFromStorage","getQueueArray","queueFilmIndex","removeQueueFilm","option","$95c314e50c7458b5$var$checkWatchedStorage","$95c314e50c7458b5$var$checkQueueStorage","event","closest"],"version":3,"file":"index.d50de1ea.js.map"}