var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},c=e.parcelRequired7c6;null==c&&((c=function(e){if(e in t)return t[e].exports;if(e in n){var c=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,c.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequired7c6=c),c("7bYU0"),c("jLhJV");const a=document.querySelector('button[data-action="queue"]');function s(){a.classList.add("filter__button--active"),i.classList.remove("filter__button--active");try{let e=localStorage.getItem("QueueMovies");e&&(e=JSON.parse(e),l(e),d.classList.add("is-hidden"))}catch(e){console.log(e)}}window.addEventListener("load",(()=>s())),a.addEventListener("click",s);var o=c("fQE3M");const i=document.querySelector('button[data-action="watched"]'),d=document.querySelector('[data-action="empty"]'),r=document.querySelector('[data-action="list-library"]');function l(e){const t=e.map((({id:e,poster_path:t,genre_ids:n,title:c,release_date:a})=>{let s=(0,o.getGenre)(n),i=a.substring(0,4);return s&&i&&(s+=" | "),c||(c="no information"),`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${t?"https://image.tmdb.org/t/p/w500"+t:NO_IMAGE}"\n              alt="${c}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${c}</h3>\n            <p class="film-card__genre">${s}${i}</p>\n          </a>\n        </li>\n\t\t`})).join("");r.innerHTML=t}i.addEventListener("click",(function(){a.classList.remove("filter__button--active"),i.classList.add("filter__button--active");try{let e=localStorage.getItem("WatchedMovies");e&&(e=JSON.parse(e),l(e),d.classList.add("is-hidden"))}catch(e){console.log(e)}return})),c("9dykO"),c("37v9V");var u=c("b5rV1"),m=(o=c("fQE3M"),c("9dykO"));const v={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue"),activLibraryBtn:document.querySelector(".filter__item>.filter__button--active")},h=new(0,o.default);function _(){h.close(),v.closeBtn.removeEventListener("click",_),window.removeEventListener("keydown",b),window.location.reload()}function b(e){"Escape"===e.code&&(h.close(),v.closeBtn.removeEventListener("click",_),window.removeEventListener("keydown",b))}v.gallery.addEventListener("click",(function(e){if(e.preventDefault(),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,u.load("QueueMovies").concat(u.load("WatchedMovies")).find((e=>e.id===Number(n))));var n;h.modifyDataFilm(t),h.open(),v.btnWatched.addEventListener("click",(function(){v.btnWatched.classList.contains("watched_send")?(v.btnWatched.textContent="REMOVE FROM WATCHED",v.btnWatched.classList.replace("watched_send","watched_remove"),(0,m.sendWatchedToStorage)()):v.btnWatched.classList.contains("watched_remove")&&(v.btnWatched.textContent="ADD TO WATCHED",v.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),c=n.findIndex((t=>t.id===e.id));n.splice(c,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));v.btnWatched.textContent="ADD TO WATCHED",v.btnWatched.classList.replace("watched_remove","watched_send")})),v.btnQueue.addEventListener("click",(function(){v.btnQueue.classList.contains("queue_send")?(v.btnQueue.textContent="REMOVE FROM QUEUE",v.btnQueue.classList.replace("queue_send","queue_remove"),(0,m.sendQueueToStorage)()):v.btnQueue.classList.contains("queue_remove")&&(v.btnQueue.textContent="ADD TO QUEUE",v.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),c=n.findIndex((t=>t.id===e.id));n.splice(c,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));v.btnQueue.textContent="ADD TO QUEUE",v.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(v.btnWatched.classList.replace("watched_send","watched_remove"),v.btnWatched.textContent="REMOVE FROM WATCHED"):(v.btnWatched.classList.replace("watched_remove","watched_send"),v.btnWatched.textContent="ADD TO WATCHED")}catch(e){v.btnWatched.classList.replace("watched_remove","watched_send")}}(t),v.btnWatched.classList.contains("watched_remove")?v.btnWatched.textContent="REMOVE FROM WATCHED":v.btnWatched.classList.contains("watched_send")&&(v.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(v.btnQueue.classList.replace("queue_send","queue_remove"),v.btnQueue.textContent="REMOVE FROM QUEUE"):(v.btnQueue.classList.replace("queue_remove","queue_send"),v.btnQueue.textContent="ADD TO QUEUE")}catch(e){v.btnQueue.classList.replace("queue_remove","queue_send")}})(t),v.btnQueue.classList.contains("queue_remove")?v.btnQueue.textContent="REMOVE FROM QUEUE":v.btnWatched.classList.contains("queue_send")&&(v.btnQueue.textContent="ADD TO QUEUE");v.closeBtn.addEventListener("click",_),window.addEventListener("keydown",b)})),v.closeBtn.addEventListener("click",_),window.addEventListener("keydown",b),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&_()}));
//# sourceMappingURL=library.8074cdca.js.map
