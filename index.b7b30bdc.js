!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},c=t.parcelRequired7c6;null==c&&((c=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var c={id:e,exports:{}};return n[e]=c,t.call(c.exports,c,c.exports),c.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=c),c.register("cDXQO",(function(t,n){e(t.exports,"trailerButtonRef",(function(){return a})),e(t.exports,"handleBackButtonClick",(function(){return s})),e(t.exports,"handleTrailerButtonClick",(function(){return d}));var r=c("cLaDu"),a=document.getElementById("trailer"),o=document.getElementById("trailer-error"),i=document.querySelector(".spinner");if(a){var s=function(e,t){t.classList.remove("display-none"),o.innerHTML="",e&&e.remove()},d=function(){i.classList.remove("is-hidden");var e=a.getAttribute("data-movie-id");(0,r.getMovieTrailer)(e).then((function(e){var t=e.results;if(!t.length)throw new Error("Trailer is not available");!function(e){var t=document.createElement("iframe");t.src="https://www.youtube.com/embed/".concat(e),t.frameBorder="0",t.allowFullscreen=!0;var n=document.querySelector(".film__info-wrapper");n.classList.add("display-none");var r=document.createElement("div");r.classList.add("iframe-container"),r.setHTML('<button class="back-button" id="back-to-modal">BACK</button>'),n.after(r);var c=document.getElementById("back-to-modal");c.addEventListener("click",(function(){s(r,n),c.removeEventListener("click",s)})),r.appendChild(t)}(t[0].key)})).catch((function(e){o.innerText=e.message})).finally((function(){i.classList.add("is-hidden")}))};a.addEventListener("click",d)}})),c("jcFG7"),c("cLaDu"),c("hV50k");var a=c("4LMMA"),o=c("73ES2"),i=c("cDXQO"),s=c("iDjs5"),d={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},u=new(0,o.default);function l(){var e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,i.handleBackButtonClick)(e,t),u.close(),d.closeBtn.removeEventListener("click",l),i.trailerButtonRef.removeEventListener("click",i.handleTrailerButtonClick),window.removeEventListener("keydown",m)}function m(e){"Escape"===e.code&&(u.close(),d.closeBtn.removeEventListener("click",l),window.removeEventListener("keydown",m))}d.gallery.addEventListener("click",(function(e){if(e.preventDefault(),i.trailerButtonRef.addEventListener("click",i.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;var t=(n=e.target.id,a.load("film-current-page").find((function(e){return e.id===Number(n)})));var n;u.modifyDataFilm(t),u.open(),function(e){try{var t=localStorage.getItem("WatchedMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?d.btnWatched.classList.replace("watched_send","watched_remove"):d.btnWatched.classList.replace("watched_remove","watched_send")}catch(e){console.error("Get state error: ",e.message),d.btnWatched.classList.replace("watched_remove","watched_send")}}(t),d.btnWatched.classList.contains("watched_remove")&&(d.btnWatched.textContent="REMOVE FROM WATCHED");(function(e){try{var t=localStorage.getItem("QueueMovies");JSON.parse(t).find((function(t){return t.id===e.id}))?d.btnQueue.classList.replace("queue_send","queue_remove"):d.btnQueue.classList.replace("queue_remove","queue_send")}catch(e){console.error("Get state error: ",e.message),d.btnQueue.classList.replace("queue_remove","queue_send")}})(t),d.btnQueue.classList.contains("queue_remove")&&(d.btnQueue.textContent="REMOVE FROM QUEUE");d.btnWatched.addEventListener("click",(function(){d.btnWatched.classList.contains("watched_send")?(d.btnWatched.textContent="REMOVE FROM WATCHED",d.btnWatched.classList.replace("watched_send","watched_remove"),(0,s.sendWatchedToStorage)(t)):d.btnWatched.classList.contains("watched_remove")&&(d.btnWatched.textContent="ADD TO WATCHED",d.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{var t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),r=n.findIndex((function(t){return t.id===e.id}));n.splice(r,1),localStorage.setItem("WatchedMovies",JSON.stringify(n)),d.btnWatched.classList.replace("watched_remove","watched_send")}catch(e){console.error("Get state error: ",e.message)}}(t))})),d.btnQueue.addEventListener("click",(function(){d.btnQueue.classList.contains("queue_send")?(d.btnQueue.textContent="REMOVE FROM QUEUE",d.btnQueue.classList.replace("queue_send","queue_remove"),(0,s.sendQueueToStorage)(t)):d.btnQueue.classList.contains("queue_remove")&&(d.btnQueue.textContent="ADD TO QUEUE",d.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{var t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),r=n.findIndex((function(t){return t.id===e.id}));n.splice(r,1),localStorage.setItem("QueueMovies",JSON.stringify(n)),d.btnQueue.classList.replace("queue_remove","queue_send")}catch(e){console.error("Get state error: ",e.message)}}(t))})),d.closeBtn.addEventListener("click",l),window.addEventListener("keydown",m)})),d.closeBtn.addEventListener("click",l),window.addEventListener("keydown",m),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&l()})),c("cDXQO"),c("aZhHc"),c("d7VxN")}();
//# sourceMappingURL=index.b7b30bdc.js.map
