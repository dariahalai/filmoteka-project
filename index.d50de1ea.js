function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r.register("5bcvB",(function(t,n){e(t.exports,"movieApi",(function(){return u}));var a=r("04jNI"),i=r("2shzp"),s=r("2nhTy"),o=r("lU18B"),c=r("8G1wF");const l={form:document.querySelector(".header__form"),input:document.querySelector(".header__input"),formButton:document.querySelector(".btn"),gallery:document.querySelector(".js-gallery"),warning:document.querySelector(".header__warning"),inputBtnClear:document.querySelector(".btn-cross")};const u=new class{async searchMovieFetch(e){const t=new URLSearchParams({api_key:c.KEY,language:"en-US",query:`${this.searchQuery}`,page:e,include_adult:!1});try{const e=await i.default.get(`https://api.themoviedb.org/3/search/movie?${t}`);if(200!==e.status)throw new Error(e.status);return e.data}catch(e){console.log(e.message)}}get query(){return this.searchQuery}set query(e){this.searchQuery=e}resetPage(){this.page=1}constructor(){this.searchQuery="",this.page=1}};function d(){l.warning.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Search result not successful. Enter the correct movie name.</div>'),setTimeout((()=>{l.warning.innerHTML=""}),4e3),o.galleryRef.innerHTML="",(0,o.getPopulars)(1).then((({page:e,results:t,total_pages:n})=>{(0,o.renderFilmCards)(t),(0,s.renderPagination)(e,n,s.IN_MAIN_POPULAR)}))}l.inputBtnClear&&(l.inputBtnClear.style.display="none",l.input.addEventListener("input",(function(e){l.input.value&&(l.inputBtnClear.style.display="block",l.inputBtnClear.addEventListener("click",(()=>{l.inputBtnClear.style.display="none",l.input.value=""})))})),l.form.addEventListener("submit",(function(e){if((0,a.default)(),e.preventDefault(),u.query=e.currentTarget.elements.searchQuery.value.trim().toLowerCase(),!u.query)return void d();u.resetPage(),u.searchMovieFetch(1).then((e=>{if(!e)return;const{page:t,total_pages:n,results:r}=e;if(!n)return(0,a.default)(),void d();l.gallery.innerHTML="",(0,o.renderFilmCards)(r),(0,s.renderPagination)(t,n,s.IN_MAIN_SEARCH),(0,a.default)()}))})))})),r.register("04jNI",(function(t,n){function a(){document.querySelector(".spinner").classList.toggle("is-hidden")}e(t.exports,"default",(function(){return a}))})),r.register("2nhTy",(function(t,n){e(t.exports,"IN_MAIN_POPULAR",(function(){return d})),e(t.exports,"IN_MAIN_SEARCH",(function(){return g})),e(t.exports,"renderPagination",(function(){return p}));var a=r("lU18B"),i=r("04jNI"),s=r("5bcvB");(0,i.default)(),window.addEventListener("load",i.default);const o=document.querySelector(".js-pagination");let c=1,l=o,u=1;const d=1,g=2;function p(e,t,n){let a="";l=n?o:pagLibRef,c=n,!e||e>t||(e>1&&(a+='<li class="js-pagination__arrow-left">&#8592;</li>'),e>1&&(a+='<li class="js-pagination__button js-pagination__button-end">1</li>'),e>4&&(a+='<li class="js-pagination__points">...</li>'),e>3&&(a+=`<li class="js-pagination__button">${e-2}</li>`),e>2&&(a+=`<li class="js-pagination__button">${e-1}</li>`),a+=`<li class="js-pagination__button js-pagination__button-current">${e}</li>`,e+1<t&&(a+=`<li class="js-pagination__button">${e+1}</li>`),e+2<t&&(a+=`<li class="js-pagination__button">${e+2}</li>`),e+4<t&&(a+='<li class="js-pagination__points">...</li>'),e<t&&(a+=`<li class="js-pagination__button js-pagination__button-end">${t}</li>`),e<t&&(a+='<li class="js-pagination__arrow-right">&#8594;</li>'),l.innerHTML=a)}l.addEventListener("click",(({target:e})=>{"..."!==e.textContent&&(e.classList.contains("js-pagination__arrow-left")&&(u-=1),e.classList.contains("js-pagination__arrow-right")&&(u+=1),e.classList.contains("js-pagination__button")&&(u=Number(e.textContent)),c&&(1===c?((0,i.default)(),(0,a.getPopulars)(u).then((({page:e,results:t,total_pages:n})=>{(0,a.renderFilmCards)(t),p(e,n,c),(0,i.default)()}))):s.movieApi.searchMovieFetch(u).then((({page:e,results:t,total_pages:n})=>{(0,a.renderFilmCards)(t),p(e,n,c)}))))}))})),r.register("lU18B",(function(t,n){e(t.exports,"galleryRef",(function(){return l})),e(t.exports,"getPopulars",(function(){return d})),e(t.exports,"renderFilmCards",(function(){return g}));var a=r("2shzp"),i=r("2nhTy"),s=r("8G1wF"),o=r("b5rV1");let c;(async function(){try{const e=new URLSearchParams({api_key:s.KEY}),t=await a.default.get(`${s.API}genre/movie/list?${e}`);if(200!==t.status)throw new Error(t.status);return t.data}catch(e){console.log("Підставити картинку, сервер терміново недоступний")}})().then((e=>{c=Array.from(e.genres)}));const l=document.querySelector(".js-gallery"),u=document.querySelector(".header__warning");async function d(e){try{const t=new URLSearchParams({api_key:s.KEY,page:e,include_adult:!1}),n=await a.default.get(`${s.API}trending/${s.MEDIA_TYPE}/week?${t}`);if(200!==n.status)throw new Error(n.status);return n.data}catch(e){}}function g(e){let t="";e.forEach((({id:e,poster_path:n,genre_ids:a,title:r,release_date:i})=>{let s=function(e){let t="";return e?(e.forEach((e=>{for(const n of c)n.id===e&&(t+=n.name+", ")})),t?t.substring(0,t.length-2):""):""}(a),o=i?i.substring(0,4):"";s&&o&&(s+=" | "),r||(r="no information"),t+=`\n      <li class="film-card">\n         \t<a href="#" class="film-card__link">\n            <img\n              class="film-card__film-img"\n              src="${n?"https://image.tmdb.org/t/p/w500"+n:"https://upload.wikimedia.org/wikipedia/commons/1/14/No_Image_Available.jpg"}"\n              alt="${r}"\n              id="${e}"\n            />\n            <h3 class="film-card__film-name">${r}</h3>\n            <p class="film-card__genre">${s}${o}</p>\n          </a>\n        </li>\n\t\t\t\t\t\t\t`})),l.innerHTML=t,o.save("film-current-page",[...e])}window.addEventListener("load",(()=>{l.innerHTML="",d(1).then((({page:e,results:t,total_pages:n})=>{g(t),(0,i.renderPagination)(e,n,i.IN_MAIN_POPULAR)})).catch((()=>{u.insertAdjacentHTML("beforeend",'<div class="header__warning-message">Service is temporarily unavailable.</div>'),setTimeout((()=>{u.innerHTML=""}),4e3)}))}))})),r("2nhTy"),r("lU18B"),r("5bcvB");var i=r("b5rV1"),s=r("fQE3M"),o=r("37v9V"),c=r("9dykO");const l={gallery:document.querySelector(".js-gallery"),closeBtn:document.querySelector("[data-modal-close]"),btnWatched:document.querySelector(".btn_watched"),btnQueue:document.querySelector(".btn_queue")},u=new(0,s.default);function d(){const e=document.querySelector(".iframe-container"),t=document.querySelector(".film__info-wrapper");(0,o.handleBackButtonClick)(e,t),u.close(),l.closeBtn.removeEventListener("click",d),o.trailerButtonRef.removeEventListener("click",o.handleTrailerButtonClick),window.removeEventListener("keydown",g)}function g(e){"Escape"===e.code&&(u.close(),l.closeBtn.removeEventListener("click",d),window.removeEventListener("keydown",g))}l.gallery.addEventListener("click",(function(e){if(e.preventDefault(),o.trailerButtonRef.addEventListener("click",o.handleTrailerButtonClick),"IMG"!==e.target.nodeName)return;const t=(n=e.target.id,i.load("film-current-page").find((e=>e.id===Number(n))));var n;u.modifyDataFilm(t),u.open(),l.btnWatched.addEventListener("click",(function(){l.btnWatched.classList.contains("watched_send")?(l.btnWatched.textContent="REMOVE FROM WATCHED",l.btnWatched.classList.replace("watched_send","watched_remove"),(0,c.sendWatchedToStorage)()):l.btnWatched.classList.contains("watched_remove")&&(l.btnWatched.textContent="ADD TO WATCHED",l.btnWatched.classList.replace("watched_remove","watched_send"),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("WatchedMovies",JSON.stringify(n))}catch(e){}}(t));l.btnWatched.textContent="ADD TO WATCHED",l.btnWatched.classList.replace("watched_remove","watched_send")})),l.btnQueue.addEventListener("click",(function(){l.btnQueue.classList.contains("queue_send")?(l.btnQueue.textContent="REMOVE FROM QUEUE",l.btnQueue.classList.replace("queue_send","queue_remove"),(0,c.sendQueueToStorage)()):l.btnQueue.classList.contains("queue_remove")&&(l.btnQueue.textContent="ADD TO QUEUE",l.btnQueue.classList.replace("queue_remove","queue_send"),function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t),a=n.findIndex((t=>t.id===e.id));n.splice(a,1),localStorage.setItem("QueueMovies",JSON.stringify(n))}catch(e){}}(t));l.btnQueue.textContent="ADD TO QUEUE",l.btnQueue.classList.replace("queue_remove","queue_send")})),localStorage.setItem("CurrentFilm",JSON.stringify(t)),function(e){try{const t=localStorage.getItem("WatchedMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(l.btnWatched.classList.replace("watched_send","watched_remove"),l.btnWatched.textContent="REMOVE FROM WATCHED"):(l.btnWatched.classList.replace("watched_remove","watched_send"),l.btnWatched.textContent="ADD TO WATCHED")}catch(e){l.btnWatched.classList.replace("watched_remove","watched_send")}}(t),l.btnWatched.classList.contains("watched_remove")?l.btnWatched.textContent="REMOVE FROM WATCHED":l.btnWatched.classList.contains("watched_send")&&(l.btnWatched.textContent="ADD TO WATCHED");(function(e){try{const t=localStorage.getItem("QueueMovies"),n=JSON.parse(t);n.find((t=>t.id===e.id))?(l.btnQueue.classList.replace("queue_send","queue_remove"),l.btnQueue.textContent="REMOVE FROM QUEUE"):(l.btnQueue.classList.replace("queue_remove","queue_send"),l.btnQueue.textContent="ADD TO QUEUE")}catch(e){l.btnQueue.classList.replace("queue_remove","queue_send")}})(t),l.btnQueue.classList.contains("queue_remove")?l.btnQueue.textContent="REMOVE FROM QUEUE":l.btnWatched.classList.contains("queue_send")&&(l.btnQueue.textContent="ADD TO QUEUE");l.closeBtn.addEventListener("click",d),window.addEventListener("keydown",g)})),l.closeBtn.addEventListener("click",d),window.addEventListener("keydown",g),document.addEventListener("click",(function(e){!e.target.closest(".modal")&&e.target.closest(".backdrop")&&d()})),r("37v9V"),r("7bYU0"),r("jLhJV");
//# sourceMappingURL=index.d50de1ea.js.map
